
<!-- saved from url=(0050)http://gdd11-webgl.appspot.com/three/three_13.html -->
<html><body><div class="webkit-line-gutter-backdrop"></div><table><tbody><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;html&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;head&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    <span class="webkit-html-tag">&lt;script <span class="webkit-html-attribute-name">src</span>="<a class="webkit-html-attribute-value webkit-html-resource-link" target="_blank" href="http://gdd11-webgl.appspot.com/three/three.js/build/Three.js">three.js/build/Three.js</a>"&gt;</span><span class="webkit-html-tag">&lt;/script&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    <span class="webkit-html-tag">&lt;style <span class="webkit-html-attribute-name">type</span>="<span class="webkit-html-attribute-value">text/css</span>"&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      body {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        margin: 0px;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        padding: 0px;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      }</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      #container {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        position:absolute;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        left:0px;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        top:0px;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        width:100%;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        height:100%;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        margin: 0px;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        padding: 0px;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      }</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    <span class="webkit-html-tag">&lt;/style&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    <span class="webkit-html-tag">&lt;script <span class="webkit-html-attribute-name">src</span>="<a class="webkit-html-attribute-value webkit-html-resource-link" target="_blank" href="http://gdd11-webgl.appspot.com/three/raf.js">raf.js</a>"&gt;</span><span class="webkit-html-tag">&lt;/script&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;/head&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;body&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    <span class="webkit-html-tag">&lt;script&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      // &lt;!--</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var renderer = new THREE.WebGLRenderer({antialias: true});</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      renderer.setSize(document.body.clientWidth, document.body.clientHeight);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      document.body.appendChild(renderer.domElement);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      renderer.setClearColorHex(0xEEEEEE, 1.0);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      renderer.clear();</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      renderer.shadowCameraFov = 50;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      renderer.shadowMapWidth = 1024;;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      renderer.shadowMapHeight = 1024;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var fov = 45; // camera field-of-view in degrees</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var width = renderer.domElement.width;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var height = renderer.domElement.height;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var aspect = width / height; // view aspect ratio</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var near = 1; // near clip plane</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var far = 10000; // far clip plane</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var camera = new THREE.PerspectiveCamera( fov, aspect, near, far );</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      camera.position.z = -400;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      camera.position.x = 200;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      camera.position.y = 350;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var scene = new THREE.Scene();</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      new THREE.ColladaLoader().load('models/monster.dae', function(collada) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        var model = collada.scene;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        skin = collada.skins[0];</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        model.scale.set(0.1, 0.1, 0.1);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        model.rotation.x = -Math.PI/2;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        model.castShadow = model.receiveShadow = true;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        scene.add(model);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      });</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var plane = new THREE.Mesh(</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        new THREE.PlaneGeometry(400, 200, 10, 10), </td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        new THREE.MeshLambertMaterial({color: 0xffffff}));</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      plane.rotation.x = -Math.PI/2;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      plane.position.y = -25.1;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      plane.receiveShadow = true;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      scene.add(plane);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var light = new THREE.SpotLight();</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      light.castShadow = true;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      light.position.set( 170, 330, -160 );</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      scene.add(light);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      renderer.shadowMapEnabled = true;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      renderer.render(scene, camera);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var paused = false;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var last = new Date().getTime();</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var down = false;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var sx = 0, sy = 0;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      window.onmousedown = function (ev){</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        down = true; sx = ev.clientX; sy = ev.clientY;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      };</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      window.onmouseup = function(){ down = false; };</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var rotation = Math.PI/2;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      camera.position.x = Math.cos(rotation)*300;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      camera.position.z = Math.sin(rotation)*300;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      window.onmousemove = function(ev) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        if (down) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          var dx = ev.clientX - sx;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          var dy = ev.clientY - sy;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          rotation += dx * 0.01;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          camera.position.x = Math.cos(rotation)*300;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          camera.position.z = Math.sin(rotation)*300;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          camera.position.y += dy;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          sx += dx;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          sy += dy;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        }</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      }</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var st = 0;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      var skin = null;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      function animate(t) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        if (!paused) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          last = t;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          if ( st &gt; 30 ) st = 0;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          if ( skin ) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">            for ( var i = 0; i &lt; skin.morphTargetInfluences.length; i++ ) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">              skin.morphTargetInfluences[ i ] = 0;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">            }</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">            skin.morphTargetInfluences[ Math.floor( st ) ] = 1;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">            st += 0.5;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          }</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          camera.lookAt( scene.position );</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">          renderer.render(scene, camera);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        }</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        window.requestAnimationFrame(animate, renderer.domElement);</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      };</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      animate(new Date().getTime());</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      onmessage = function(ev) {</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">        paused = (ev.data == 'pause');</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      };</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">      // --&gt;</td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">    <span class="webkit-html-tag">&lt;/script&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content">  <span class="webkit-html-tag">&lt;/body&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><br></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"><span class="webkit-html-tag">&lt;/html&gt;</span></td></tr><tr><td class="webkit-line-number"></td><td class="webkit-line-content"></td></tr></tbody></table></body></html>